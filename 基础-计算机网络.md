##### [0001] OSI七层网络模型
1. 应用层    = HTTP协议
2. 表示层    = ...
3. 会话层    = ...
4. 传输层    = TCP/UDP协议
5. 网络层    = IP协议
6. 数据链路层 = MAC协议,ARP协议
7. 物理层    = ...

##### [0002] TCP/IP四层网络模型
- 应用层（对应OSI的应用层+表示层+会话层）
- 传输层（对应OSI的传输层）
- 网络层（对应OSI的网络层）
- 网络接口层（对应OSI的数据链路层+物理层）

##### [0003] HTTP是什么？报文格式？
HTTP是超文本传输协议，是一种基于TCP的无状态协议。
HTTP请求报文 = 请求行(URL+HTTP版本) + 请求头 + 请求体
HTTP响应报文 = 状态行(响应码+HTTP版本) + 响应头 + 响应体

##### [0004] GET和POST请求的区别
GET使用`?`和`&`在URL中拼接请求，POST在请求体中传输信息。

##### [0005] REST(Ful)中有哪些请求方法？
GET用于select，POST用于insert，PUT用于update，DELETE用于delete

##### [0006] 常见的HTTP状态码有哪些
1xx（信息性状态码）
2xx（成功状态码）
 - 200 OK：请求成功
3xx（重定向状态码）
4xx（客户端错误状态码）
 - 400 Bad Request：请求语法错误
 - 403 Forbidden：禁止访问
 - 404 Not Found：资源不存在
5xx（服务器错误状态码）
 - 500 Internal Server Error：服务器内部错误

##### [0007] HTTP和HTTPS的区别是什么？
HTTP是明文传输，默认使用80端口，HTTPS增加了SSL/TLS加密，默认使用443端口。

##### [0008] SSL/TLS的运作方式
需要有从CA机构购买的SSL证书，服务端与客户端之间需要在通信时进行SSL/TLS握手，选择加密算法，
通过非对称加密交换密匙，完成加密通信。

##### [0009] HTTP/1.1 (主流) 相对于 HTTP/1.0 的区别
HTTP/1.1 支持了长连接，不用每次请求都建立新的连接。
HTTP/1.1 支持管道，可以同时发送多个请求。
HTTP/1.1 支持错误处理，可以在一个连接中处理多个请求。

##### [0010] HTTP/2.0 相对于 HTTP/1.1 的区别？
HTTP/2.0 使用二进制分帧，不同Stream的帧可以乱序发送，
接收方再通过Stream的ID重新组装成HTTP消息，提高了传输效率。
HTTP/2.0 支持多路复用，允许多个请求和响应在同一个连接中同时进行，提高了传输效率。
HTTP/2.0 服务器可以主动推送资源，减少了客户端的请求次数。
HTTP/2.0 使用HPACK头部压缩算法，双方维护Map，只发送索引而减少了传输的数据量。

##### [0011] HTTP/3.0 是什么？
HTTP/3.0 使用QUIC协议而不是TCP协议作为传输协议。

##### [0012] TCP是什么？
TCP是传输控制协议。
面向连接：在数据传输前需要建立连接，确保数据可靠传输。
可靠传输：TCP通过确认、重传、流量控制和拥塞控制等机制，确保数据可靠传输。
基于字节流：TCP将数据看作是一连串的字节流，没有长度限制和边界分隔。

##### [0013] TCP的报文头部格式
报文头部 = 源端口、目标端口、序列号、确认号、标志位、窗口大小、校验和等
序列号：以递增的方式解决网络包乱序的问题
确认号：是下一次希望收到的序列号，用于解决丢包问题。
标志位：SYN(同步)、ACK(确认)、FIN(结束)。

##### [0014] TCP和UDP的区别
TCP面向连接，是可靠传输；UDP无连接，是不可靠传输。
TCP是一对一的连接，而UDP可以是一对多甚至多对多的。

##### [0015] UDP为什么不可靠?
UDP不用建立连接，没有复杂的确认机制与重传机制，数据包容易发生丢失、重复、乱序等问题。
UDP不进行流量控制与拥塞控制，无法根据网络的实际拥塞情况进行动态调整。

##### [0016] UDP有哪些应用场景？
UDP适用于对实时性要求高的应用场景，如视频播放、在线游戏、DNS查询等。

##### [0017] TCP三次握手的过程
![TCP三次握手过程图](../public/tcp3.png)
1. 客户端发送SYN报文，序列号seq=x，进入SYN-SENT已发送状态。。
2. 服务器发送SYN-ACK报文，序列号seq=y, 确认号ack=x+1，进入SYN-RCVD已收到状态。
3. 客户端发送ACK报文，序列号seq=x+1, 确认号ack=y+1，双方进入ESTABLISHED已建立连接状态。
在三次握手中，客户端和服务端确认了双方的发送和接收信息能力正常。

##### [0018] TCP为什么不是两次握手？
1. **避免历史连接**：如果使用两次握手，客户端第一次的SYN报文在网络中阻塞，第二次重发才正常建立连接。数据传输完成，客户端释放连接后，第一次的SYN报文错误到达了服务端。服务端以为客户端再次请求连接，向客户端发出响应报文后保持无效的连接状态，持续等待已下线的客户端发送数据。使用三次握手后，由于客户端没有第三次握手确认，服务端不会进行持续等待，避免了这种资源浪费。
2. **同步序列号以保证可靠传输**：两次握手中至多只有客户端的起始序列号能被确认，而三次握手保证了双方起始序列号x和y都被确认，保证了传输的可靠性。

##### [0019] TCP四次挥手
![TCP四次挥手过程图](../public/tcp4.png)
1. 客户端发送FIN报文，进入FIN-WAIT-1终止等待1状态。
2. 服务器发送ACK报文，进入CLOSE-WAIT关闭等待状态，客户端进入FIN-WAIT-2终止等待2状态。
3. 服务器把剩余信息发送完，然后发送FIN报文，进入LAST-ACK最后确认状态。
4. 客户端发送ACK报文，进入TIME-WAIT时间等待状态等待 2 MSL(最大报文段生存时间)后关闭。

##### [0020] TCP四次挥手最后客户端为什么要等待 2 MSL？
如果客户端直接关闭，最后发送的ACK报文有可能没有成功到达服务端，导致服务端超时重传FIN报文，
而此时客户端已经关闭无法回复，导致服务端卡在无法正常关闭的状态。

##### [0021] TCP为什么不是三次挥手？
三次挥手无法确保连接的可靠性，客户端无法确认服务器是否收到自己的结束请求。

##### [0022] TCP如何保证可靠传输？
TCP通过确认、重传、流量控制和拥塞控制等机制，确保数据可靠传输。

##### [0023] TCP如何进行流量控制？
![TCP滑动窗口过程图](../public/tcpwindow.png)
TCP通过滑动窗口机制进行流量控制，确保发送方不会发送过多的数据，导致接收方无法处理。
双方维护发送窗口和接受窗口，发送窗口前端有未收到确认的数据时，无法继续向下滑动。

##### [0024] TCP如何进行拥塞控制？
![TCP拥塞控制过程图](../public/tcp.png)
设置拥塞窗口(cwnd)变量和慢开始门限(ssthresh)，控制网络资源被分配为合理的值。
**慢开始**: cwnd从1倍(最大报文段MSS)开始，2倍指数级增长。
**拥塞避免**: cwnd到达ssthresh后，+1线性增长
**快重传+快恢复**: 网络拥塞可能并不严重，只是有单个报文段丢失，为防止发送方收不到这个报文段的确认而直接重新慢开始，接收方每收到一个错序报文就响应一次重复确认。当发送方一连收到三个重复确认后，立刻使用快重传发送那个丢失的报文段。然后快恢复 ssthresh = cwnd = cwnd / 2 ，继续保持拥塞避免阶段。

##### [0025] 粘包和分包问题是什么？如何解决？
由于TCP没有完善的数据分割方法，可能出现包划分不明确的问题。
可以使用分隔符、说明包长度等方法划分数据边界。

##### [0026] TCP延迟应答
接收端稍作延迟再发送确认(ACK)消息，这段时间又消费了一些包，就可以返回一个更大的窗口，
减少网络中的确认消息数量，增大资源利用率。

##### [0027] TCP捎带应答
延迟应答使得ACK与响应可以一起发送回去。

##### [0028] TCP会有三次挥手出现吗？
当被动关闭方在TCP挥手过程中，没有数据要发送并且开启了延迟应答，第二和第三次挥手就会合并捎带传输。

##### [0029] TCP连接意外断开(KeepAlive)
正常关机流程会先四次挥手全部结束再关机，意外关机时，TCP还有KeepAlive机制，在长时间没有数据传输时探测心跳，不过默认时间很长，可以调整参数减少服务器负担。

##### [0030] QUIC相比TCP有什么特点？
QUIC是基于UDP的应用层协议。
1. TCP的重传报文seq序列号是不变的，因此发送方无法分辨ACK确认的是原始报文还是重传报文，
计算RTT(往返时间)与RTO(超时时间)时就会出现误差，导致重传的概率增大。
而QUIC的包编号Packet Number严格递增。
2. TCP是顺序确认的，单个报文丢失重传会阻塞整个滑动窗口，
而Packet Number严格递增使QUIC支持乱序确认，窗口可以持续滑动，
而对重传包的辨识依靠Stream的ID和Offset信息进行确认。
3. TCP单个连接维护一个滑动窗口，而QUIC单个连接的每个Stream维护各自的滑动窗口，
即使其中一个阻塞也不会因此阻塞整个连接。
4. QUIC内置TLS1.3，可以达到0RTT的效果。

##### [0031] 传输过程时间计算
ping出来的是单纯的一个往返时间(RTT)
TCP三次握手是1.5RTT，但是第三次传输数据
TLS1.2需要2RTT握手，TLS1.3需要1RTT握手
TLS1.3有0RTT技术

##### [0032] IPv4和IPv6的区别是什么？
IPv4为32位地址(4个Byte)，IPv6为128位地址。

##### [0033] IPv4有哪些特殊的地址？
广播地址：255.255.255.255
本机地址：127.0.0.1
全部许可: 0.0.0.0
内网私有地址:
- 10.0.0.0
- 172.16~32.0.0
- 192.168.0.0

##### [0034] DNS域名解析的具体过程
先查本地缓存，本地缓存没有时，依次访问根`.`/顶级`com`/权限(二级`baidu`三级`www`)域名服务器，获取下一级域名服务器的IP地址，最终查询到要访问的服务器IP地址。

##### [0035] 什么是DDNS，其具体过程是什么？
DDNS是动态域名解析，IP地址发生动态改变时，需要通知DNS服务器动态修改域名与IP地址的映射关系。

##### [0036] 什么是XSS攻击？如何防范处理？
XSS(Cross-Site Scripting)是跨站脚本攻击。
存储型XSS：恶意JavaScript脚本存储到评论区等服务器数据中，在用户浏览器中执行。
反射型XSS：通过钓鱼链接URL执行脚本，用户点击时触发。
防范: 严格校验用户输入信息。

##### [0037] 什么是CSRF攻击？如何防范处理？
CSRF(Cross-Site Request Forgery)是跨站请求伪造。
用户登录A网站获取Cookie后，又登录B网站，B网站窃取A网站的相关URL和用户Cookie等，
操作用户浏览器对A网站发起伪造的请求，完成转账等危险操作。
防范: 用户请求再经过token等其他无法伪造信息等校验，设置验证码等必须用户操作的二次验证方法。

##### [0038] 什么是DDoS攻击？如何防范处理？
DDoS(Distributed Denial of Service)是分布式拒绝服务，攻击者通过大量请求占用服务器资源。
可以使用防火墙、负载均衡、DDoS防护服务进行防范处理。

##### [0039] 浏览器输入URL后会发生什么？
解析URL定位服务器地址和资源路径，与服务器建立连接后通过HTTP请求与响应获取资源并渲染页面。

##### [0040] 和网络传输速度有关的概念有哪些？
包括带宽、延迟、丢包率等。

##### [0041] Socket编程
Socket是网络套接字，是对TCP/UDP通信的接口封装。

##### [0042] 单工通信、半双工通信、全双工通信都是什么意思？
单工通信: 信号单向传输，只有一个发送端/接收端。
半双工通信: 在单工通信的基础上还可以切换方向，但同一时刻只能单向流动。
全双工通信: 两个单工通信，双方同时作为发送端和接收端。

##### [0043] WebScoket是什么？有哪些应用场景？
WebSocket是一种在单个TCP连接上进行全双工通信的协议，实时性相对HTTP更好。

##### [0044] 常见的IO模式有哪些？
阻塞IO：当操作未完成时，线程会一直等待，直到操作完成。
非阻塞IO：当操作未完成时，线程不会等待，而是立即返回。
IO多路复用：使用select、poll、epoll等系统调用，监听多个IO事件。
异步IO：当操作未完成时，线程不会等待，而是立即返回，操作完成后通过回调函数通知线程。

##### [0045] IO多路复用在Linux操作系统中是怎么实现的？
select/poll: 使用BitMap/List线性结构来存储多个进程关注的Socket.
epoll: 使用红黑树结构存储Socket，使用就绪队列通知进程，效率更高。

##### [0046] ARP协议
传输报文需要有目标的IP地址和MAC地址，ARP协议可以通过IP查询MAC地址。
发送方首先发送Request广播，网络内其他主机查看是不是问自己的IP地址。
如果发现自己的IP地址与广播吻合，则响应自己的MAC地址给发送方。
ARP表: 映射表缓存，可以直接查询以发送报文。
主机更新IP地址时，会向外广播免费ARP以更新其他主机的ARP表信息。

##### [0047] ARP攻击是什么?怎么预防?
ARP攻击即一台恶意主机伪造了免费ARP，使得其他主机发送的报文的IP地址被
错误定向，无法正常通信。预防措施有设置静态ARP表等，防止映射信息被篡改。

##### [0048] ICMP协议与网络命令
> ping [IP] 发送ICMP报文查询网络是否可达，获取响应时间
> traceroute [IP] 发送ICMP报文查询网关链路，显示详细信息

##### [0001] 限流算法
1. **固定窗口**: 每个时间段内限制最大请求数，如每秒1000次。
2. **滑动窗口**: 窗口划分小格流动，更加平滑。
3. **漏桶算法**: 请求以固定速率流出，桶满则拒绝请求。
4. **令牌桶算法**: 固定速率生成令牌，请求获取令牌后通过，允许突发流量。

##### [0001] 负载均衡策略
随机、加权随机、轮询、加权轮询、IP Hash、最小连接